{
  "$schema": "https://contentgrid.cloud/schemas/application-schema.json",
  "applicationName": "HR application",
  "version": "1.0.0",
  "entities": [
    {
      "name": "department",
      "title":  "Department",
      "collectionTitle": "Departments",
      "description": "A department within the organization",
      "table": "departments",
      "pathSegment": "departments",
      "linkName": "departments",
      "primaryKey": {
        "name": "id",
        "title": {
          "": "uniq id",
          "en": "Unique id",
          "nl": "Unieke ID"
        },
        "description": {
          "en": "The unique identifier for the department",
          "nl": "De unieke identiticatiecode voor het departement"
        },
        "type": "simple",
        "columnName": "dept_id",
        "dataType": "uuid",
        "flags": [
          "readOnly"
        ],
        "constraints": [
          {
            "type": "required"
          },
          {
            "type": "unique"
          }
        ]
      },
      "attributes": [
        {
          "name": "name",
          "title": "Name",
          "description": "The name of the department",
          "type": "simple",
          "columnName": "dept_name",
          "dataType": "text",
          "constraints": [
            {
              "type": "required"
            },
            {
              "type": "unique"
            }
          ]
        },
        {
          "name": "budget",
          "description": "Annual budget for the department",
          "type": "simple",
          "columnName": "dept_budget",
          "dataType": "double"
        },
        {
          "name": "createdAt",
          "description": "When the department was created",
          "type": "simple",
          "columnName": "created_at",
          "dataType": "datetime",
          "flags": [
            "createdDate"
          ]
        },
        {
          "name": "modifiedAt",
          "description": "When the department was last modified",
          "type": "simple",
          "columnName": "modified_at",
          "dataType": "datetime",
          "flags": [
            "modifiedDate"
          ]
        }
      ],
      "searchFilters": [
        {
          "name": "nameFilter",
          "title": "Name",
          "attributePath": [{"name": "name", "type": "attr"}],
          "type": "prefix"
        },
        {
          "name": "projects.description",
          "title": "Project description",
          "attributePath": [{"name": "projects", "type": "rel"}, {"name": "description", "type": "attr"}],
          "type": "exact"
        }
      ]
    },
    {
      "name": "employee",
      "title": {
        "en": "Employee",
        "nl": "Werknemer"
      },
      "collectionTitle": {
        "en": "Employees",
        "nl": "Werknemers"
      },
      "description": "An employee of the organization",
      "table": "employees",
      "pathSegment": "employees",
      "linkName": "employees",
      "primaryKey": {
        "name": "id",
        "description": "The unique identifier for the employee",
        "type": "simple",
        "columnName": "emp_id",
        "dataType": "uuid",
        "flags": [
          "readOnly"
        ]
      },
      "attributes": [
        {
          "name": "firstName",
          "description": "Employee's first name",
          "type": "simple",
          "columnName": "first_name",
          "dataType": "text",
          "constraints": [
            {
              "type": "required"
            }
          ]
        },
        {
          "name": "lastName",
          "description": "Employee's last name",
          "type": "simple",
          "columnName": "last_name",
          "dataType": "text",
          "constraints": [
            {
              "type": "required"
            }
          ]
        },
        {
          "name": "email",
          "description": "Employee's email address",
          "type": "simple",
          "columnName": "email",
          "dataType": "text"
        },
        {
          "name": "hireDate",
          "description": "Date when the employee was hired",
          "type": "simple",
          "columnName": "hire_date",
          "dataType": "datetime"
        },
        {
          "name": "salary",
          "title": "Current salary",
          "description": "Employee's salary",
          "type": "simple",
          "columnName": "salary",
          "dataType": "double"
        },
        {
          "name": "isManager",
          "title": "Manager",
          "description": "Whether the employee is a manager",
          "type": "simple",
          "columnName": "is_manager",
          "dataType": "boolean"
        },
        {
          "name": "contactInfo",
          "title": "Contact info",
          "description": "Employee's contact information",
          "type": "composite",
          "attributes": [
            {
              "name": "phone",
              "title": "Phone",
              "description": "Employee's phone number",
              "type": "simple",
              "columnName": "phone",
              "dataType": "text"
            },
            {
              "name": "address",
              "description": "Employee's address",
              "type": "simple",
              "columnName": "address",
              "dataType": "text"
            }
          ]
        },
        {
          "name": "createdBy",
          "description": "User who created the employee record",
          "type": "user",
          "idColumn": "creator_id",
          "namespaceColumn": "creator_namespace",
          "userNameColumn": "creator_username",
          "flags": [
            "creator"
          ]
        },
        {
          "name": "modifiedBy",
          "description": "User who last modified the employee record",
          "type": "user",
          "idColumn": "modifier_id",
          "namespaceColumn": "modifier_namespace",
          "userNameColumn": "modifier_username",
          "flags": [
            "modifier"
          ]
        }
      ],
      "searchFilters": [
        {
          "name": "lastNameFilter",
          "attributePath": [{"name": "lastName", "type": "attr"}],
          "type": "prefix"
        },
        {
          "name": "emailFilter",
          "title": "Email",
          "attributePath": [{"name": "email", "type": "attr"}],
          "type": "exact"
        },
        {
          "name": "phoneFilter",
          "title": "Telephone",
          "attributePath": [{"name": "contactInfo", "type": "attr"}, {"name": "phone", "type": "attr"}],
          "type": "exact"
        },
        {
          "name": "manager.lastNameFilter",
          "title": "Manager last name",
          "attributePath": [{"name": "manager", "type": "rel"}, {"name": "lastName", "type": "attr"}],
          "type": "prefix"
        },
        {
          "name": "subordinates.lastNameFilter",
          "attributePath": [{"name": "subordinates", "type": "rel"}, {"name": "lastName", "type": "attr"}],
          "type": "prefix"
        },
        {
          "name": "_internal_projects",
          "attributePath": [{ "name": "projects", "type": "rel" }, { "name": "id", "type": "attr" }],
          "type": "exact",
          "flags": ["hidden"]
        }
      ],
      "sortableFields": [
        {
          "name": "lastName",
          "attributePath": [{"name": "lastName", "type": "attr"}]
        },
        {
          "name": "email",
          "attributePath": [{"name": "email", "type": "attr"}]
        }
      ]
    },
    {
      "name": "Project",
      "description": "A project within the organization",
      "table": "projects",
      "pathSegment": "projects",
      "linkName": "projects",
      "primaryKey": {
        "name": "id",
        "description": "The unique identifier for the project",
        "type": "simple",
        "columnName": "proj_id",
        "dataType": "uuid",
        "flags": [
          "readOnly"
        ],
        "constraints": [
          {
            "type": "required"
          },
          {
            "type": "unique"
          }
        ]
      },
      "attributes": [
        {
          "name": "name",
          "description": "The name of the project",
          "type": "simple",
          "columnName": "proj_name",
          "dataType": "text",
          "constraints": [
            {
              "type": "required"
            },
            {
              "type": "unique"
            }
          ]
        },
        {
          "name": "description",
          "description": "Description of the project",
          "type": "simple",
          "columnName": "proj_description",
          "dataType": "text"
        },
        {
          "name": "startDate",
          "description": "When the project starts",
          "type": "simple",
          "columnName": "start_date",
          "dataType": "datetime"
        },
        {
          "name": "endDate",
          "description": "When the project ends",
          "type": "simple",
          "columnName": "end_date",
          "dataType": "datetime"
        },
        {
          "name": "budget",
          "description": "Budget allocated to the project",
          "type": "simple",
          "columnName": "budget",
          "dataType": "double"
        },
        {
          "name": "status",
          "description": "Current status of the project",
          "type": "simple",
          "columnName": "status",
          "dataType": "text",
          "constraints": [
            {
              "type": "allowedValues",
              "values": [
                "Not Started",
                "In Progress",
                "Completed",
                "On Hold"
              ]
            }
          ]
        }
      ],
      "searchFilters": [
        {
          "name": "nameFilter",
          "title": "Name",
          "attributePath": [{"name": "name", "type": "attr"}],
          "type": "prefix"
        },
        {
          "name": "statusFilter",
          "title": "Status",
          "attributePath": [{"name": "status", "type": "attr"}],
          "type": "exact"
        },
        {
          "name": "budget~gt",
          "title": {
            "en": "Budget greater than",
            "nl": "Budget meer dan"
          },
          "attributePath": [{"name": "budget", "type": "attr"}],
          "type": "greater"
        },
        {
          "name": "budget~gte",
          "title": {
            "en": "Budget greater than or equal",
            "nl": "Budget meer dan of gelijk aan"
          },
          "attributePath": [{"name": "budget", "type": "attr"}],
          "type": "greater-or-equal"
        },
        {
          "name": "budget~lt",
          "attributePath": [{"name": "budget", "type": "attr"}],
          "type": "less"
        },
        {
          "name": "budget~lte",
          "attributePath": [{"name": "budget", "type": "attr"}],
          "type": "less-or-equal"
        }
      ],
      "sortableFields": [
        {
          "name": "name",
          "attributePath": [{"name": "name", "type": "attr"}]
        },
        {
          "name": "status",
          "attributePath": [{"name": "status", "type": "attr"}]
        }
      ]
    },
    {
      "name": "document",
      "description": "A document associated with a project",
      "table": "documents",
      "pathSegment": "documents",
      "linkName": "documents",
      "primaryKey": {
        "name": "id",
        "description": "The unique identifier for the document",
        "type": "simple",
        "columnName": "doc_id",
        "dataType": "uuid",
        "flags": [
          "readOnly"
        ],
        "constraints": [
          {
            "type": "required"
          },
          {
            "type": "unique"
          }
        ]
      },
      "attributes": [
        {
          "name": "title",
          "description": "Title of the document",
          "type": "simple",
          "columnName": "title",
          "dataType": "text"
        },
        {
          "name": "description",
          "description": "Description of the document",
          "type": "simple",
          "columnName": "description",
          "dataType": "text"
        },
        {
          "name": "createdAt",
          "description": "When the document was created",
          "type": "simple",
          "columnName": "created_at",
          "dataType": "datetime",
          "flags": [
            "createdDate"
          ]
        },
        {
          "name": "file",
          "description": "The document file",
          "type": "content",
          "pathSegment": "file",
          "linkName": "file",
          "idColumn": "file_id",
          "fileNameColumn": "file_name",
          "mimeTypeColumn": "mime_type",
          "lengthColumn": "file_size"
        }
      ],
      "searchFilters": [
        {
          "name": "titleFilter",
          "attributePath": [{"name": "title", "type": "attr"}],
          "type": "prefix"
        }
      ],
      "sortableFields": [
        {
          "name": "title",
          "attributePath": [{"name": "title", "type": "attr"}]
        }
      ]
    },
    {
      "name": "Skill",
      "description": "Skills that employees may possess",
      "table": "skills",
      "pathSegment": "skills",
      "linkName": "skills",
      "primaryKey": {
        "name": "id",
        "description": "The unique identifier for the skill",
        "type": "simple",
        "columnName": "skill_id",
        "dataType": "uuid",
        "flags": [
          "readOnly"
        ],
        "constraints": [
          {
            "type": "required"
          },
          {
            "type": "unique"
          }
        ]
      },
      "attributes": [
        {
          "name": "name",
          "description": "Name of the skill",
          "type": "simple",
          "columnName": "skill_name",
          "dataType": "text"
        },
        {
          "name": "category",
          "description": "Category of the skill",
          "type": "simple",
          "columnName": "category",
          "dataType": "text"
        },
        {
          "name": "description",
          "description": "Description of the skill",
          "type": "simple",
          "columnName": "description",
          "dataType": "text"
        }
      ],
      "searchFilters": [
        {
          "name": "nameFilter",
          "attributePath": [{"name": "name", "type": "attr"}],
          "type": "prefix"
        },
        {
          "name": "categoryFilter",
          "attributePath": [{"name": "category", "type": "attr"}],
          "type": "exact"
        }
      ],
      "sortableFields": [
        {
          "name": "name",
          "attributePath": [{"name": "name", "type": "attr"}]
        },
        {
          "name": "category",
          "attributePath": [{"name": "category", "type": "attr"}]
        }
      ]
    },
    {
      "name": "SecretInformation",
      "description": "Sensitive information for an employee",
      "table": "secret_information",
      "pathSegment": "secret-information",
      "linkName": "secret-information",
      "primaryKey": {
        "name": "id",
        "description": "The unique identifier for the secret information",
        "type": "simple",
        "columnName": "secret_id",
        "dataType": "uuid",
        "flags": [
          "readOnly"
        ],
        "constraints": [
          {
            "type": "required"
          },
          {
            "type": "unique"
          }
        ]
      },
      "attributes": [
        {
          "name": "ssn",
          "description": "Social Security Number",
          "type": "simple",
          "columnName": "ssn",
          "dataType": "text",
          "constraints": [
            {
              "type": "required"
            },
            {
              "type": "unique"
            }
          ]
        }
      ],
      "searchFilters": [
        {
          "name": "ssnFilter",
          "attributePath": [{"name": "ssn", "type": "attr"}],
          "type": "exact"
        }
      ],
      "sortableFields": [
        {
          "name": "ssn",
          "attributePath": [{"name": "ssn", "type": "attr"}]
        }
      ]
    }
  ],
  "relations": [
    {
      "type": "one-to-many",
      "sourceEndpoint": {
        "entityName": "department",
        "flags": ["hidden"]
      },
      "targetEndpoint": {
        "name": "employees",
        "title": "Employees",
        "pathSegment": "employees",
        "linkName": "employees",
        "entityName": "employee"
      },
      "sourceReference": "dept_id"
    },
    {
      "type": "one-to-many",
      "sourceEndpoint": {
        "name": "manager",
        "pathSegment": "manager",
        "linkName": "manager",
        "entityName": "employee"
      },
      "targetEndpoint": {
        "name": "subordinates",
        "pathSegment": "subordinates",
        "linkName": "subordinates",
        "entityName": "employee"
      },
      "sourceReference": "manager_id"
    },
    {
      "type": "one-to-many",
      "sourceEndpoint": {
        "name": "projects",
        "pathSegment": "projects",
        "linkName": "projects",
        "entityName": "department"
      },
      "targetEndpoint": {
        "entityName": "Project",
        "flags": ["hidden"]
      },
      "sourceReference": "dept_id"
    },
    {
      "type": "one-to-many",
      "sourceEndpoint": {
        "entityName": "employee",
        "flags": ["hidden"]
      },
      "targetEndpoint": {
        "name": "manager",
        "pathSegment": "manager",
        "linkName": "manager",
        "entityName": "Project",
        "flags": ["required"]
      },
      "sourceReference": "manager_id"
    },
    {
      "type": "one-to-many",
      "sourceEndpoint": {
        "entityName": "Project",
        "flags": ["hidden"]
      },
      "targetEndpoint": {
        "name": "project",
        "pathSegment": "project",
        "linkName": "project",
        "entityName": "document",
        "flags": ["required"]
      },
      "sourceReference": "proj_id"
    },
    {
      "type": "many-to-many",
      "sourceEndpoint": {
        "name": "projects",
        "pathSegment": "projects",
        "linkName": "projects",
        "entityName": "employee"
      },
      "targetEndpoint": {
        "name": "employees",
        "pathSegment": "employees",
        "linkName": "employees",
        "entityName": "Project"
      },
      "joinTable": "employee_projects",
      "sourceReference": "emp_id",
      "targetReference": "proj_id"
    },
    {
      "type": "many-to-many",
      "sourceEndpoint": {
        "name": "skills",
        "pathSegment": "skills",
        "linkName": "skills",
        "entityName": "employee"
      },
      "targetEndpoint": {
        "name": "employees",
        "pathSegment": "employees",
        "linkName": "employees",
        "entityName": "Skill"
      },
      "joinTable": "employee_skills",
      "sourceReference": "emp_id",
      "targetReference": "skill_id"
    },
    {
      "type": "one-to-one",
      "sourceEndpoint": {
        "name": "secretInformation",
        "pathSegment": "secret-information",
        "linkName": "secret-information",
        "entityName": "employee",
        "flags": ["required"]
      },
      "targetEndpoint": {
        "name": "employee",
        "pathSegment": "employee",
        "linkName": "employee",
        "entityName": "SecretInformation"
      },
      "targetReference": "secret_information_id"
    }
  ]
}
